___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.

___INFO___

{
  "type": "TAG",
  "id": "argoid_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Argoid Data Collector - Shopify",
  "brand": {
    "id": "Argoid",
    "displayName": "",
    "thumbnail": "data:image/png;base64,PHN2ZyB3aWR0aD0iMjE4IiBoZWlnaHQ9IjUzIiB2aWV3Qm94PSIwIDAgMjE4IDUzIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMzIuOTEgNTEuMTQwM0wzMS45NzY0IDUwLjkwNzlMMzYuNDExMSAzOC4zNTUyTDQ1LjA0NzEgMzUuNTY1OEw0Ni40NDc1IDMxLjE0OTFMNTAuNjQ4OCAyNC40MDc5TDQ2LjIxNDEgMTUuMzQyMUw0MC42MTI0IDguNjAwODZMMjguNDc1MyA2LjA0Mzg0TDE4LjQzODkgNy45MDM0OUw1LjgzNTA5IDE0LjE3OThMMS42MzM4MSAyMC45MjFMMi44MDA4MyAyOS45ODY4TDEzLjMwNCAzMy4yNDEyTDE4LjY3MjMgMzYuNzI4TDI5LjQwOSAzNC4xNzFMMzAuMTA5MiA0MS4zNzcySDI5LjQwOUwyOC43MDg4IDM1LjMzMzNMMTguNjcyMyAzNy42NTc5TDEyLjgzNzIgMzMuOTM4NkwyLjEwMDYyIDMwLjY4NDJMMC45MzM1OTQgMjAuNjg4Nkw1LjM2ODI4IDEzLjQ4MjRMMTguMjA1NSA3LjIwNjEyTDI4LjQ3NTMgNS4xMTQwMUw0MS4wNzkyIDcuOTAzNDlMNDYuOTE0MyAxNC44NzcyTDUxLjU4MjQgMjQuNDA3OUw0Ny4zODExIDMxLjM4MTZMNDUuNzQ3MyAzNi4yNjMxTDM3LjExMTMgMzkuMDUyNkwzMi45MSA1MS4xNDAzWiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMjguMjQyMSAzNC42MzU5TDE5LjYwNjIgMjguMzU5NkwxMS42NzA0IDE3Ljg5OTFMMjguNzA5IDE0LjQxMjJMMzUuNzExMSAyMS4xNTM1VjIxLjM4NTlDMzcuNTc4MyAzMS4xNDkxIDM3LjU3ODMgMzEuMTQ5MSAzNy41NzgzIDMxLjM4MTVDMzcuODExNyAzMS42MTQgMzcuODExNyAzMS42MTQgMjguMjQyMSAzNC42MzU5Wk0yMC4wNzMgMjcuODk0N0wyOC4yNDIxIDMzLjcwNjFDMzEuMDQzIDMyLjc3NjMgMzUuNDc3NyAzMS4zODE1IDM2LjY0NDcgMzAuOTE2NkMzNi40MTEzIDI5Ljc1NDMgMzUuNDc3NyAyNC44NzI4IDM1LjAxMDkgMjEuNjE4NEwyOC40NzU1IDE1LjM0MjFMMTMuMzA0MiAxOC41OTY0TDIwLjA3MyAyNy44OTQ3WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMTMuMDcwOCAzMy4yNDEyTDEyLjYwNCAxOC41OTY1TDE4LjQzOTEgNi43NDEyM0wyNi44NDE3IDEyLjc4NTFMMjYuMzc0OSAxMy40ODI1TDE4LjY3MjUgNy45MDM1MUwxMy41Mzc2IDE4LjgyODlMMTMuNzcxIDMxLjM4MTZMMTkuNjA2MSAyNi45NjQ5TDI3LjMwODUgMTQuNjQ0N0wyOC4yNDIxIDUuODExNEwyOS4xNzU3IDYuMDQzODZMMjguMjQyMSAxNC44NzcyTDIwLjMwNjQgMjcuNDI5OEwxMy4wNzA4IDMzLjI0MTJaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0zNi44NzgxIDM5LjI4NTFMMjkuMTc1OCAzNS4zMzMzTDI5LjY0MjYgMzQuNjM2TDM2Ljg3ODEgMzguMzU1M0w0NC44MTM5IDMyLjA3ODlMMzUuNzExMSAzMS4xNDkxTDQ5LjAxNTIgMjUuMTA1M0wzNS4wMTA5IDIwLjkyMUwzNi4xNzc5IDIwLjQ1NjFDNDAuMzc5MiAxOC41OTY1IDQ2LjY4MTEgMTUuODA3IDQ3LjE0NzkgMTUuODA3TDQ3LjYxNDggMTYuNTA0NEM0Ny4zODEzIDE2LjczNjggNDEuNzc5NiAxOS4wNjE0IDM3LjU3ODQgMjAuOTIxTDUxLjM0OTIgMjQuODcyOEwzOC43NDU0IDMwLjQ1MTdMNDYuOTE0NSAzMS4xNDkxTDM2Ljg3ODEgMzkuMjg1MVoiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTEzLjA3MDYgMzIuMzExNEwxLjE2Njk5IDE5LjI5MzhMMTAuNTAzMiAxNy40MzQyTDUuODM1MDkgMTQuMTc5OEw2LjMwMTkgMTMuNDgyNEwxMi42MDM4IDE3Ljg5OTFMMi44MDA4MyAxOS45OTEyTDEzLjc3MDggMzEuNjE0TDEzLjA3MDYgMzIuMzExNFoiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTExLjggMTkuNzAzOEwyLjcyMjY2IDI5LjM5MDlMMy40MDUyMiAzMC4wMjUzTDEyLjQ4MjYgMjAuMzM4MkwxMS44IDE5LjcwMzhaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0xOS4xMzkyIDM1Ljc5ODNMMTguMjA1NiAzNS41NjU4TDE5LjYwNiAyNy44OTQ4TDM0LjA3NzEgMjAuNDU2MkwzNC4zMTA1IDIxLjE1MzVMMjAuMzA2MiAyOC4zNTk3TDE5LjEzOTIgMzUuNzk4M1oiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTM1LjQ3NzcgMjAuMjIzN0wzNC43Nzc1IDE5Ljc1ODhMMzkuNDQ1NiA5Ljc2MzE4TDI5LjE3NTggMTMuOTQ3NEwyOC45NDI0IDEzLjAxNzZMNDEuMzEyOCA4LjEzNTk5TDM1LjQ3NzcgMjAuMjIzN1oiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTI5Ljk5MjYgNDAuOTY3NkwyOS4wOTgxIDQxLjIzMzlMMzIuMDM5NCA1MS4wMzM0TDMyLjkzMzkgNTAuNzY3MUwyOS45OTI2IDQwLjk2NzZaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0yLjgwMDgyIDMxLjM4MTVDMy41NzQyNSAzMS4zODE1IDQuMjAxMjUgMzAuNzU3MSA0LjIwMTI1IDI5Ljk4NjhDNC4yMDEyNSAyOS4yMTY1IDMuNTc0MjUgMjguNTkyIDIuODAwODIgMjguNTkyQzIuMDI3MzggMjguNTkyIDEuNDAwMzkgMjkuMjE2NSAxLjQwMDM5IDI5Ljk4NjhDMS40MDAzOSAzMC43NTcxIDIuMDI3MzggMzEuMzgxNSAyLjgwMDgyIDMxLjM4MTVaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0xOC42NzI0IDM3Ljg5MDNDMTkuNDQ1OCAzNy44OTAzIDIwLjA3MjggMzcuMjY1OSAyMC4wNzI4IDM2LjQ5NTZDMjAuMDcyOCAzNS43MjUzIDE5LjQ0NTggMzUuMTAwOCAxOC42NzI0IDM1LjEwMDhDMTcuODk5IDM1LjEwMDggMTcuMjcyIDM1LjcyNTMgMTcuMjcyIDM2LjQ5NTZDMTcuMjcyIDM3LjI2NTkgMTcuODk5IDM3Ljg5MDMgMTguNjcyNCAzNy44OTAzWiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMjguNDc1NiAzNi4wMzA3QzI5LjI0OTEgMzYuMDMwNyAyOS44NzYxIDM1LjQwNjIgMjkuODc2MSAzNC42MzU5QzI5Ljg3NjEgMzMuODY1NyAyOS4yNDkxIDMzLjI0MTIgMjguNDc1NiAzMy4yNDEyQzI3LjcwMjIgMzMuMjQxMiAyNy4wNzUyIDMzLjg2NTcgMjcuMDc1MiAzNC42MzU5QzI3LjA3NTIgMzUuNDA2MiAyNy43MDIyIDM2LjAzMDcgMjguNDc1NiAzNi4wMzA3WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNNTAuODgyNCAyNi4wMzUxQzUxLjY1NTggMjYuMDM1MSA1Mi4yODI4IDI1LjQxMDYgNTIuMjgyOCAyNC42NDAzQzUyLjI4MjggMjMuODcwMSA1MS42NTU4IDIzLjI0NTYgNTAuODgyNCAyMy4yNDU2QzUwLjEwODkgMjMuMjQ1NiA0OS40ODE5IDIzLjg3MDEgNDkuNDgxOSAyNC42NDAzQzQ5LjQ4MTkgMjUuNDEwNiA1MC4xMDg5IDI2LjAzNTEgNTAuODgyNCAyNi4wMzUxWiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMTguNjcyNCA4LjYwMDg4QzE5LjQ0NTggOC42MDA4OCAyMC4wNzI4IDcuOTc2NDMgMjAuMDcyOCA3LjIwNjE0QzIwLjA3MjggNi40MzU4NSAxOS40NDU4IDUuODExNCAxOC42NzI0IDUuODExNEMxNy44OTkgNS44MTE0IDE3LjI3MiA2LjQzNTg1IDE3LjI3MiA3LjIwNjE0QzE3LjI3MiA3Ljk3NjQzIDE3Ljg5OSA4LjYwMDg4IDE4LjY3MjQgOC42MDA4OFoiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTI4LjcwOSA2Ljk3MzY4QzI5LjQ4MjUgNi45NzM2OCAzMC4xMDk1IDYuMzQ5MjMgMzAuMTA5NSA1LjU3ODk0QzMwLjEwOTUgNC44MDg2NSAyOS40ODI1IDQuMTg0MiAyOC43MDkgNC4xODQyQzI3LjkzNTYgNC4xODQyIDI3LjMwODYgNC44MDg2NSAyNy4zMDg2IDUuNTc4OTRDMjcuMzA4NiA2LjM0OTIzIDI3LjkzNTYgNi45NzM2OCAyOC43MDkgNi45NzM2OFoiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTI5LjQwOTIgNDIuNTM5NUMzMC4xODI3IDQyLjUzOTUgMzAuODA5NiA0MS45MTUgMzAuODA5NiA0MS4xNDQ3QzMwLjgwOTYgNDAuMzc0NCAzMC4xODI3IDM5Ljc1IDI5LjQwOTIgMzkuNzVDMjguNjM1OCAzOS43NSAyOC4wMDg4IDQwLjM3NDQgMjguMDA4OCA0MS4xNDQ3QzI4LjAwODggNDEuOTE1IDI4LjYzNTggNDIuNTM5NSAyOS40MDkyIDQyLjUzOTVaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0zNi44NzggMzIuMzExNEMzNy42NTE0IDMyLjMxMTQgMzguMjc4NCAzMS42ODcgMzguMjc4NCAzMC45MTY3QzM4LjI3ODQgMzAuMTQ2NCAzNy42NTE0IDI5LjUyMiAzNi44NzggMjkuNTIyQzM2LjEwNDUgMjkuNTIyIDM1LjQ3NzUgMzAuMTQ2NCAzNS40Nzc1IDMwLjkxNjdDMzUuNDc3NSAzMS42ODcgMzYuMTA0NSAzMi4zMTE0IDM2Ljg3OCAzMi4zMTE0WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMTMuMDcwOCAzNS4xMDA5QzE0LjEwMjEgMzUuMTAwOSAxNC45MzgxIDM0LjI2ODMgMTQuOTM4MSAzMy4yNDEyQzE0LjkzODEgMzIuMjE0MiAxNC4xMDIxIDMxLjM4MTYgMTMuMDcwOCAzMS4zODE2QzEyLjAzOTYgMzEuMzgxNiAxMS4yMDM2IDMyLjIxNDIgMTEuMjAzNiAzMy4yNDEyQzExLjIwMzYgMzQuMjY4MyAxMi4wMzk2IDM1LjEwMDkgMTMuMDcwOCAzNS4xMDA5WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNNDYuNjgwNyAzMi43NzYzQzQ3LjQ1NDEgMzIuNzc2MyA0OC4wODExIDMyLjE1MTggNDguMDgxMSAzMS4zODE2QzQ4LjA4MTEgMzAuNjExMyA0Ny40NTQxIDI5Ljk4NjggNDYuNjgwNyAyOS45ODY4QzQ1LjkwNzMgMjkuOTg2OCA0NS4yODAzIDMwLjYxMTMgNDUuMjgwMyAzMS4zODE2QzQ1LjI4MDMgMzIuMTUxOCA0NS45MDczIDMyLjc3NjMgNDYuNjgwNyAzMi43NzYzWiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMzYuNDExMiA0MC40NDc0QzM3LjMxMzUgNDAuNDQ3NCAzOC4wNDUgMzkuNzE4OSAzOC4wNDUgMzguODIwMkMzOC4wNDUgMzcuOTIxNSAzNy4zMTM1IDM3LjE5MyAzNi40MTEyIDM3LjE5M0MzNS41MDg4IDM3LjE5MyAzNC43NzczIDM3LjkyMTUgMzQuNzc3MyAzOC44MjAyQzM0Ljc3NzMgMzkuNzE4OSAzNS41MDg4IDQwLjQ0NzQgMzYuNDExMiA0MC40NDc0WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNNS42MDE2IDE1LjEwOTdDNi4zNzUwNCAxNS4xMDk3IDcuMDAyMDMgMTQuNDg1MiA3LjAwMjAzIDEzLjcxNDlDNy4wMDIwMyAxMi45NDQ2IDYuMzc1MDQgMTIuMzIwMiA1LjYwMTYgMTIuMzIwMkM0LjgyODE3IDEyLjMyMDIgNC4yMDExNyAxMi45NDQ2IDQuMjAxMTcgMTMuNzE0OUM0LjIwMTE3IDE0LjQ4NTIgNC44MjgxNyAxNS4xMDk3IDUuNjAxNiAxNS4xMDk3WiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMS40MDA0MyAyMS4zODU5QzIuMTczODYgMjEuMzg1OSAyLjgwMDg2IDIwLjc2MTUgMi44MDA4NiAxOS45OTEyQzIuODAwODYgMTkuMjIwOSAyLjE3Mzg2IDE4LjU5NjQgMS40MDA0MyAxOC41OTY0QzAuNjI2OTkzIDE4LjU5NjQgMCAxOS4yMjA5IDAgMTkuOTkxMkMwIDIwLjc2MTUgMC42MjY5OTMgMjEuMzg1OSAxLjQwMDQzIDIxLjM4NTlaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik00Ni45MTQxIDE3LjQzNDNDNDcuNjg3NSAxNy40MzQzIDQ4LjMxNDUgMTYuODA5OCA0OC4zMTQ1IDE2LjAzOTVDNDguMzE0NSAxNS4yNjkyIDQ3LjY4NzUgMTQuNjQ0OCA0Ni45MTQxIDE0LjY0NDhDNDYuMTQwNyAxNC42NDQ4IDQ1LjUxMzcgMTUuMjY5MiA0NS41MTM3IDE2LjAzOTVDNDUuNTEzNyAxNi44MDk4IDQ2LjE0MDcgMTcuNDM0MyA0Ni45MTQxIDE3LjQzNDNaIiBmaWxsPSIjRENERERFIi8+CjxwYXRoIGQ9Ik0zMi40NDM0IDUzQzMzLjYwMzYgNTMgMzQuNTQ0MSA1Mi4wNjMzIDM0LjU0NDEgNTAuOTA3OUMzNC41NDQxIDQ5Ljc1MjUgMzMuNjAzNiA0OC44MTU4IDMyLjQ0MzQgNDguODE1OEMzMS4yODMzIDQ4LjgxNTggMzAuMzQyOCA0OS43NTI1IDMwLjM0MjggNTAuOTA3OUMzMC4zNDI4IDUyLjA2MzMgMzEuMjgzMyA1MyAzMi40NDM0IDUzWiIgZmlsbD0iI0RDRERERSIvPgo8cGF0aCBkPSJNMzUuMDEwOCAyMy4wMTMyQzM2LjE3MSAyMy4wMTMyIDM3LjExMTQgMjIuMDc2NSAzNy4xMTE0IDIwLjkyMTFDMzcuMTExNCAxOS43NjU2IDM2LjE3MSAxOC44MjkgMzUuMDEwOCAxOC44MjlDMzMuODUwNiAxOC44MjkgMzIuOTEwMiAxOS43NjU2IDMyLjkxMDIgMjAuOTIxMUMzMi45MTAyIDIyLjA3NjUgMzMuODUwNiAyMy4wMTMyIDM1LjAxMDggMjMuMDEzMloiIGZpbGw9IiNEQ0REREUiLz4KPHBhdGggZD0iTTc4LjQyMzkgMTMuNzE0OUM4MC41MjQ2IDE0Ljg3NzIgODIuMzkxOCAxNi43MzY5IDgzLjU1ODggMTguODI5Qzg0LjcyNTkgMjEuMTUzNSA4NS40MjYxIDIzLjQ3ODEgODUuNDI2MSAyNi4yNjc2VjM4LjU4NzhDODUuNDI2MSAzOS4wNTI3IDg1LjE5MjcgMzkuNTE3NiA4NC45NTkzIDM5Ljk4MjVDODQuNDkyNSA0MC40NDc0IDg0LjAyNTYgNDAuNDQ3NCA4My41NTg4IDQwLjQ0NzRDODIuODU4NiA0MC40NDc0IDgyLjM5MTggNDAuMjE1IDgyLjE1ODQgMzkuOTgyNUM4MS42OTE2IDM5LjUxNzYgODEuNjkxNiAzOS4wNTI3IDgxLjY5MTYgMzguNTg3OFYzNS41NjU4QzgwLjUyNDYgMzcuMTkzIDc4Ljg5MDcgMzguNTg3OCA3Ny4wMjM1IDM5LjUxNzZDNzUuMTU2MyA0MC40NDc0IDczLjA1NTYgNDAuOTEyMyA3MC43MjE2IDQwLjkxMjNDNjguMTU0MSA0MC45MTIzIDY1LjU4NjcgNDAuMjE0OSA2My40ODYgMzkuMDUyN0M2MS4zODU0IDM3Ljg5MDQgNTkuNzUxNiAzNi4wMzA3IDU4LjM1MTEgMzMuOTM4NkM1Ny4xODQxIDMxLjg0NjUgNTYuNDgzOSAyOS4yODk1IDU2LjQ4MzkgMjYuNUM1Ni40ODM5IDIzLjcxMDYgNTcuMTg0MSAyMS4zODYgNTguMzUxMSAxOS4wNjE0QzU5LjUxODEgMTYuNzM2OSA2MS4zODU0IDE1LjEwOTcgNjMuNDg2IDEzLjk0NzRDNjUuNTg2NyAxMi43ODUxIDY4LjE1NDEgMTIuMDg3OCA3MC45NTUgMTIuMDg3OEM3My43NTU4IDExLjg1NTMgNzYuMzIzMyAxMi41NTI3IDc4LjQyMzkgMTMuNzE0OVpNNzYuNTU2NyAzNS43OTgzQzc4LjE5MDUgMzQuODY4NSA3OS4zNTc2IDMzLjQ3MzcgODAuMjkxMiAzMS44NDY1QzgxLjIyNDggMzAuMjE5MyA4MS42OTE2IDI4LjM1OTcgODEuNjkxNiAyNi4yNjc2QzgxLjY5MTYgMjQuMTc1NSA4MS4yMjQ4IDIyLjMxNTggODAuMjkxMiAyMC42ODg2Qzc5LjM1NzYgMTkuMDYxNCA3OC4xOTA1IDE3LjY2NjcgNzYuNTU2NyAxNi43MzY5Qzc0LjkyMjkgMTUuODA3MSA3My4wNTU2IDE1LjM0MjEgNzEuMTg4NCAxNS4zNDIxQzY5LjA4NzcgMTUuMzQyMSA2Ny40NTM5IDE1LjgwNzEgNjUuODIwMSAxNi43MzY5QzY0LjE4NjIgMTcuNjY2NyA2My4wMTkyIDE5LjA2MTQgNjIuMDg1NiAyMC42ODg2QzYxLjE1MiAyMi4zMTU4IDYwLjY4NTIgMjQuMTc1NSA2MC42ODUyIDI2LjI2NzZDNjAuNjg1MiAyOC4zNTk3IDYxLjE1MiAzMC4yMTkzIDYyLjA4NTYgMzEuODQ2NUM2My4wMTkyIDMzLjQ3MzcgNjQuMTg2MiAzNC44Njg1IDY1LjgyMDEgMzUuNzk4M0M2Ny40NTM5IDM2LjcyODEgNjkuMzIxMSAzNy4xOTMgNzEuMTg4NCAzNy4xOTNDNzMuMDU1NiAzNy4xOTMgNzQuOTIyOSAzNi43MjgxIDc2LjU1NjcgMzUuNzk4M1oiIGZpbGw9IiMwMEFFRUYiLz4KPHBhdGggZD0iTTEwNy42IDEyLjMyMDFDMTA4LjUzMyAxMi43ODUgMTA4Ljc2NyAxMy4yNSAxMDguNzY3IDEzLjk0NzNDMTA4Ljc2NyAxNC4xNzk4IDEwOC43NjcgMTQuNDEyMiAxMDguNzY3IDE0LjQxMjJDMTA4LjUzMyAxNC44NzcyIDEwOC4zIDE1LjM0MjEgMTA4LjA2NiAxNS4zNDIxQzEwNy44MzMgMTUuNTc0NSAxMDcuMzY2IDE1LjU3NDUgMTA2Ljg5OSAxNS41NzQ1QzEwNi42NjYgMTUuNTc0NSAxMDUuOTY2IDE1LjU3NDUgMTA1LjI2NiAxNS41NzQ1QzEwNS4wMzIgMTUuNTc0NSAxMDQuNTY1IDE1LjU3NDUgMTA0LjA5OCAxNS41NzQ1QzEwMS41MzEgMTUuNTc0NSA5OS40MzA0IDE2LjI3MTkgOTcuNzk2NiAxNy42NjY2Qzk2LjE2MjcgMTkuMDYxNCA5NS4yMjkxIDIwLjkyMSA5NS4yMjkxIDIzLjAxMzFWMzguNTg3N0M5NS4yMjkxIDM5LjI4NTEgOTQuOTk1NyAzOS43NSA5NC43NjIzIDM5Ljk4MjRDOTQuNTI4OSA0MC4yMTQ5IDkzLjgyODcgNDAuNDQ3MyA5My4zNjE5IDQwLjQ0NzNDOTIuNjYxNyA0MC40NDczIDkyLjE5NDggNDAuMjE0OSA5MS45NjE0IDM5Ljk4MjRDOTEuNzI4IDM5Ljc1IDkxLjQ5NDYgMzkuMDUyNiA5MS40OTQ2IDM4LjU4NzdWMTQuMTc5OEM5MS40OTQ2IDEzLjQ4MjQgOTEuNzI4IDEzLjAxNzUgOTEuOTYxNCAxMi43ODVDOTIuMTk0OCAxMi41NTI2IDkyLjg5NTEgMTIuMzIwMSA5My4zNjE5IDEyLjMyMDFDOTQuMDYyMSAxMi4zMjAxIDk0LjUyODkgMTIuNTUyNiA5NC43NjIzIDEyLjc4NUM5NC45OTU3IDEzLjAxNzUgOTUuMjI5MSAxMy43MTQ5IDk1LjIyOTEgMTQuMTc5OFYxNi41MDQzQzk2LjE2MjcgMTUuMTA5NiA5Ny41NjMyIDEzLjk0NzMgOTkuMTk3IDEzLjAxNzVDMTAwLjgzMSAxMi4zMjAxIDEwMi40NjUgMTEuODU1MiAxMDQuMzMyIDExLjg1NTJDMTA1LjczMiAxMS44NTUyIDEwNi44OTkgMTIuMDg3NyAxMDcuNiAxMi4zMjAxWiIgZmlsbD0iIzAwQUVFRiIvPgo8cGF0aCBkPSJNMTMxLjY0IDEzLjcxNDlDMTMzLjc0MSAxNC44NzcyIDEzNS42MDggMTYuNzM2OCAxMzYuNzc1IDE4LjgyODlDMTM3Ljk0MiAyMC45MjEgMTM4LjY0MiAyMy40NzggMTM4LjY0MiAyNi4yNjc1VjM2Ljk2MDVDMTM4LjY0MiAzOS43NSAxMzcuOTQyIDQyLjMwNyAxMzYuNzc1IDQ0LjM5OTFDMTM1LjYwOCA0Ni43MjM3IDEzMy43NDEgNDguMzUwOCAxMzEuNjQgNDkuNzQ1NkMxMjkuNTQgNTEuMTQwMyAxMjYuOTcyIDUxLjYwNTIgMTI0LjE3MSA1MS42MDUyQzEyMS42MDQgNTEuNjA1MiAxMTkuMDM2IDUxLjE0MDMgMTE2LjkzNiA1MC4yMTA1QzExNC44MzUgNDkuMjgwNyAxMTMuMjAxIDQ3Ljg4NTkgMTExLjU2NyA0Ni4wMjYzQzExMS4zMzQgNDUuNzkzOCAxMTEuMTAxIDQ1LjMyODkgMTExLjEwMSA0NC44NjRDMTExLjEwMSA0NC4zOTkxIDExMS4zMzQgNDMuOTM0MiAxMTEuODAxIDQzLjQ2OTNDMTEyLjAzNCA0My4yMzY4IDExMi41MDEgNDMuMDA0NCAxMTIuOTY4IDQzLjAwNDRDMTEzLjIwMSA0My4wMDQ0IDExMy42NjggNDMuMDA0NCAxMTMuOTAxIDQzLjIzNjhDMTE0LjEzNSA0My40NjkzIDExNC4zNjggNDMuNzAxNyAxMTQuNjAyIDQzLjkzNDJDMTE1LjUzNSA0NS4zMjg5IDExNi45MzYgNDYuMjU4NyAxMTguNTcgNDYuOTU2MUMxMjAuMjAzIDQ3LjY1MzUgMTIyLjA3MSA0OC4xMTg0IDEyMy45MzggNDguMTE4NEMxMjUuODA1IDQ4LjExODQgMTI3LjY3MiA0Ny42NTM1IDEyOS4zMDYgNDYuNzIzN0MxMzAuOTQgNDUuNzkzOCAxMzIuMTA3IDQ0LjM5OTEgMTMzLjA0MSA0Mi43NzE5QzEzMy45NzQgNDEuMTQ0NyAxMzQuNDQxIDM5LjA1MjYgMTM0LjQ0MSAzNi45NjA1VjM0LjYzNTlDMTMzLjUwNyAzNi40OTU2IDEzMS44NzQgMzguMTIyOCAxMzAuMDA2IDM5LjI4NTFDMTI4LjM3MyA0MC4yMTQ5IDEyNi4wMzkgNDAuOTEyMiAxMjMuNzA0IDQwLjkxMjJDMTIwLjkwNCA0MC45MTIyIDExOC41NyA0MC4yMTQ5IDExNi40NjkgMzkuMDUyNkMxMTQuMzY4IDM3Ljg5MDMgMTEyLjczNCAzNi4wMzA3IDExMS41NjcgMzMuOTM4NkMxMTAuNCAzMS44NDY1IDEwOS43IDI5LjI4OTQgMTA5LjcgMjYuNUMxMDkuNyAyMy43MTA1IDExMC40IDIxLjE1MzUgMTExLjU2NyAxOS4wNjE0QzExMi43MzQgMTYuNzM2OCAxMTQuMzY4IDE0Ljg3NzIgMTE2LjcwMiAxMy43MTQ5QzExOC44MDMgMTIuNTUyNiAxMjEuMzcgMTEuODU1MiAxMjQuMTcxIDExLjg1NTJDMTI2Ljk3MiAxMS44NTUyIDEyOS4zMDYgMTIuNTUyNiAxMzEuNjQgMTMuNzE0OVpNMTI5LjU0IDM1Ljc5ODJDMTMxLjE3MyAzNC44Njg0IDEzMi4zNCAzMy43MDYxIDEzMy4yNzQgMzEuODQ2NUMxMzQuMjA4IDMwLjIxOTMgMTM0LjY3NCAyOC4zNTk2IDEzNC42NzQgMjYuMjY3NUMxMzQuNjc0IDI0LjE3NTQgMTM0LjIwOCAyMi4zMTU4IDEzMy4yNzQgMjAuNjg4NkMxMzIuMzQgMTkuMDYxNCAxMzEuMTczIDE3LjY2NjYgMTI5LjU0IDE2LjczNjhDMTI3LjkwNiAxNS44MDcgMTI2LjAzOSAxNS4zNDIxIDEyNC4xNzEgMTUuMzQyMUMxMjIuMDcxIDE1LjM0MjEgMTIwLjIwMyAxNS44MDcgMTE4LjgwMyAxNi43MzY4QzExNy4xNjkgMTcuNjY2NiAxMTYuMDAyIDE5LjA2MTQgMTE1LjA2OSAyMC42ODg2QzExNC4xMzUgMjIuMzE1OCAxMTMuNjY4IDI0LjE3NTQgMTEzLjY2OCAyNi4yNjc1QzExMy42NjggMjguMzU5NiAxMTQuMTM1IDMwLjIxOTMgMTE1LjA2OSAzMS44NDY1QzExNi4wMDIgMzMuNDczNiAxMTcuMTY5IDM0Ljg2ODQgMTE4LjgwMyAzNS43OTgyQzEyMC40MzcgMzYuNzI4IDEyMi4zMDQgMzcuMTkyOSAxMjQuMTcxIDM3LjE5MjlDMTI2LjAzOSAzNy4xOTI5IDEyNy45MDYgMzYuNzI4IDEyOS41NCAzNS43OTgyWiIgZmlsbD0iIzAwQUVFRiIvPgo8cGF0aCBkPSJNMTY0Ljc4NCAxMy43MTQ5QzE2Ni44ODQgMTQuODc3MiAxNjguNzUyIDE2LjczNjggMTY5LjkxOSAxOC44Mjg5QzE3MS4wODYgMjEuMTUzNSAxNzEuNzg2IDIzLjQ3OCAxNzEuNzg2IDI2LjI2NzVDMTcxLjc4NiAyOS4wNTcgMTcxLjA4NiAzMS4zODE1IDE2OS45MTkgMzMuNzA2MUMxNjguNzUyIDM1Ljc5ODIgMTY2Ljg4NCAzNy42NTc5IDE2NC43ODQgMzguODIwMUMxNjIuNjgzIDM5Ljk4MjQgMTYwLjExNiA0MC42Nzk4IDE1Ny4zMTUgNDAuNjc5OEMxNTQuNTE0IDQwLjY3OTggMTUyLjE4IDM5Ljk4MjQgMTQ5Ljg0NiAzOC44MjAxQzE0Ny43NDUgMzcuNjU3OSAxNDUuODc4IDM1Ljc5ODIgMTQ0LjcxMSAzMy43MDYxQzE0My41NDQgMzEuNjE0IDE0Mi44NDQgMjkuMDU3IDE0Mi44NDQgMjYuMjY3NUMxNDIuODQ0IDIzLjQ3OCAxNDMuNTQ0IDIxLjE1MzUgMTQ0LjcxMSAxOC44Mjg5QzE0NS44NzggMTYuNTA0MyAxNDcuNzQ1IDE0Ljg3NzIgMTQ5Ljg0NiAxMy43MTQ5QzE1MS45NDcgMTIuNTUyNiAxNTQuNTE0IDExLjg1NTIgMTU3LjMxNSAxMS44NTUyQzE2MC4xMTYgMTEuODU1MiAxNjIuNDUgMTIuNTUyNiAxNjQuNzg0IDEzLjcxNDlaTTE1MS45NDcgMTYuOTY5M0MxNTAuMzEzIDE3Ljg5OTEgMTQ5LjE0NiAxOS4yOTM4IDE0OC4yMTIgMjAuOTIxQzE0Ny4yNzggMjIuNTQ4MiAxNDYuODEyIDI0LjQwNzkgMTQ2LjgxMiAyNi41QzE0Ni44MTIgMjguNTkyMSAxNDcuMjc4IDMwLjQ1MTcgMTQ4LjIxMiAzMi4wNzg5QzE0OS4xNDYgMzMuNzA2MSAxNTAuMzEzIDM1LjEwMDggMTUxLjk0NyAzNi4wMzA3QzE1My41OCAzNi45NjA1IDE1NS40NDggMzcuNDI1NCAxNTcuMzE1IDM3LjQyNTRDMTU5LjQxNSAzNy40MjU0IDE2MS4wNDkgMzYuOTYwNSAxNjIuNjgzIDM2LjAzMDdDMTY0LjMxNyAzNS4xMDA4IDE2NS40ODQgMzMuNzA2MSAxNjYuNDE4IDMyLjA3ODlDMTY3LjM1MSAzMC40NTE3IDE2Ny44MTggMjguNTkyMSAxNjcuODE4IDI2LjVDMTY3LjgxOCAyNC40MDc5IDE2Ny4zNTEgMjIuNTQ4MiAxNjYuNDE4IDIwLjkyMUMxNjUuNDg0IDE5LjI5MzggMTY0LjMxNyAxNy44OTkxIDE2Mi42ODMgMTYuOTY5M0MxNjEuMDQ5IDE2LjAzOTQgMTU5LjE4MiAxNS41NzQ1IDE1Ny4zMTUgMTUuNTc0NUMxNTUuNDQ4IDE1LjU3NDUgMTUzLjU4IDE2LjAzOTQgMTUxLjk0NyAxNi45NjkzWiIgZmlsbD0iIzAwQUVFRiIvPgo8cGF0aCBkPSJNMTgyLjUyMyAxLjg1OTZDMTgyLjk4OSAyLjMyNDUxIDE4My40NTYgMy4wMjE4OCAxODMuNDU2IDMuOTUxNzFDMTgzLjQ1NiA0LjY0OTA3IDE4My4yMjMgNS4zNDY0NCAxODIuNTIzIDYuMDQzODFDMTgyLjA1NiA2LjUwODcyIDE4MS4zNTYgNi45NzM2MyAxODAuNDIyIDYuOTczNjNDMTc5LjcyMiA2Ljk3MzYzIDE3OS4wMjIgNi43NDExOCAxNzguMzIxIDYuMDQzODFDMTc3Ljg1NSA1LjU3ODkgMTc3LjYyMSA0Ljg4MTUzIDE3Ny42MjEgMy45NTE3MUMxNzcuNjIxIDMuMDIxODggMTc3Ljg1NSAyLjU1Njk3IDE3OC41NTUgMS44NTk2QzE3OS4wMjIgMS4zOTQ2OSAxNzkuNzIyIDEuMTYyMjMgMTgwLjY1NSAxLjE2MjIzQzE4MS4xMjIgMS4xNjIyMyAxODEuODIyIDEuMzk0NjkgMTgyLjUyMyAxLjg1OTZaTTE3OS4wMjIgMTIuNzg1QzE3OS40ODggMTIuMzIwMSAxNzkuOTU1IDEyLjMyMDEgMTgwLjQyMiAxMi4zMjAxQzE4MS4xMjIgMTIuMzIwMSAxODEuNTg5IDEyLjU1MjYgMTgxLjgyMiAxMi43ODVDMTgyLjI4OSAxMy4yNSAxODIuMjg5IDEzLjcxNDkgMTgyLjI4OSAxNC4xNzk4VjM4LjU4NzdDMTgyLjI4OSAzOS4yODUgMTgyLjA1NiAzOS43NSAxODEuODIyIDM5Ljk4MjRDMTgxLjM1NiA0MC40NDczIDE4MC44ODkgNDAuNDQ3MyAxODAuNDIyIDQwLjQ0NzNDMTc5LjcyMiA0MC40NDczIDE3OS4yNTUgNDAuMjE0OSAxNzkuMDIyIDM5Ljk4MjRDMTc4LjU1NSAzOS41MTc1IDE3OC41NTUgMzkuMDUyNiAxNzguNTU1IDM4LjU4NzdWMTQuMTc5OEMxNzguMzIxIDEzLjcxNDkgMTc4LjU1NSAxMy4wMTc1IDE3OS4wMjIgMTIuNzg1WiIgZmlsbD0iIzAwQUVFRiIvPgo8cGF0aCBkPSJNMjE4IDE0LjE3OThWMjYuNUMyMTggMjkuMjg5NSAyMTcuMyAzMS42MTQgMjE2LjEzMyAzMy45Mzg2QzIxNC45NjYgMzYuMjYzMiAyMTMuMDk4IDM3Ljg5MDMgMjEwLjk5OCAzOS4wNTI2QzIwOC44OTcgNDAuMjE0OSAyMDYuMzMgNDAuOTEyMyAyMDMuNTI5IDQwLjkxMjNDMjAwLjcyOCA0MC45MTIzIDE5OC4zOTQgNDAuMjE0OSAxOTYuMDYgMzkuMDUyNkMxOTMuOTU5IDM3Ljg5MDMgMTkyLjA5MiAzNi4wMzA3IDE5MC45MjUgMzMuOTM4NkMxODkuNzU4IDMxLjYxNCAxODkuMDU4IDI5LjI4OTUgMTg5LjA1OCAyNi41QzE4OS4wNTggMjMuNzEwNSAxODkuNzU4IDIxLjM4NiAxOTAuOTI1IDE5LjA2MTRDMTkyLjA5MiAxNi45NjkzIDE5My45NTkgMTUuMTA5NiAxOTYuMDYgMTMuOTQ3NEMxOTguMTYgMTIuNzg1MSAyMDAuNDk0IDEyLjA4NzcgMjAzLjI5NSAxMi4wODc3QzIwNS42MjkgMTIuMDg3NyAyMDcuNzMgMTIuNTUyNiAyMDkuNTk3IDEzLjQ4MjVDMjExLjQ2NCAxNC40MTIzIDIxMy4wOTggMTUuODA3IDIxNC4yNjUgMTcuNDM0MlYyLjA5MjExQzIxNC4yNjUgMS4zOTQ3NCAyMTQuNDk5IDAuOTI5ODI1IDIxNC43MzIgMC42OTczNjhDMjE0Ljk2NiAwLjIzMjQ1NiAyMTUuNDMyIDAgMjE2LjEzMyAwQzIxNi44MzMgMCAyMTcuMyAwLjIzMjQ1NiAyMTcuNTMzIDAuNDY0OTEyQzIxOCAwLjkyOTgyNSAyMTggMS4zOTQ3NCAyMTggMS44NTk2NVYxMy40ODI1QzIxOCAxMy43MTQ5IDIxOCAxMy45NDc0IDIxOCAxNC4xNzk4Wk0yMDguODk3IDM1Ljc5ODJDMjEwLjUzMSAzNC44Njg0IDIxMS42OTggMzMuNDczNyAyMTIuNjMxIDMxLjg0NjVDMjEzLjU2NSAzMC4yMTkzIDIxNC4wMzIgMjguMzU5NiAyMTQuMDMyIDI2LjI2NzVDMjE0LjAzMiAyNS41NzAyIDIxNC4wMzIgMjUuMzM3NyAyMTQuMDMyIDI0Ljg3MjhWMjQuNjQwNEMyMTMuNzk5IDIxLjg1MDkgMjEyLjYzMSAxOS43NTg4IDIxMC41MzEgMTcuODk5MUMyMDguNjY0IDE2LjI3MTkgMjA2LjMzIDE1LjM0MjEgMjAzLjUyOSAxNS4zNDIxQzIwMS40MjggMTUuMzQyMSAxOTkuNzk0IDE1LjgwNyAxOTguMTYgMTYuNzM2OEMxOTYuNTI3IDE3LjY2NjcgMTk1LjM2IDE5LjA2MTQgMTk0LjQyNiAyMC42ODg2QzE5My40OTIgMjIuMzE1OCAxOTMuMDI1IDI0LjE3NTQgMTkzLjAyNSAyNi4yNjc1QzE5My4wMjUgMjguMzU5NiAxOTMuNDkyIDMwLjIxOTMgMTk0LjQyNiAzMS44NDY1QzE5NS4zNiAzMy40NzM3IDE5Ni41MjcgMzQuODY4NCAxOTguMTYgMzUuNzk4MkMxOTkuNzk0IDM2LjcyODEgMjAxLjY2MSAzNy4xOTMgMjAzLjUyOSAzNy4xOTNDMjA1LjYyOSAzNy4xOTMgMjA3LjI2MyAzNi43MjgxIDIwOC44OTcgMzUuNzk4MloiIGZpbGw9IiMwMEFFRUYiLz4KPHBhdGggZD0iTTcuMjM1NDIgMjcuODk0OEM4LjY1MzM5IDI3Ljg5NDggOS44MDI4NyAyNi43NSA5LjgwMjg3IDI1LjMzNzhDOS44MDI4NyAyMy45MjU2IDguNjUzMzkgMjIuNzgwOCA3LjIzNTQyIDIyLjc4MDhDNS44MTc0NiAyMi43ODA4IDQuNjY3OTcgMjMuOTI1NiA0LjY2Nzk3IDI1LjMzNzhDNC42Njc5NyAyNi43NSA1LjgxNzQ2IDI3Ljg5NDggNy4yMzU0MiAyNy44OTQ4WiIgZmlsbD0iIzAwQUVFRiIvPgo8cGF0aCBkPSJNMTIuODM3IDIwLjQ1NjJDMTQuMjU0OSAyMC40NTYyIDE1LjQwNDQgMTkuMzExNCAxNS40MDQ0IDE3Ljg5OTJDMTUuNDA0NCAxNi40ODcgMTQuMjU0OSAxNS4zNDIyIDEyLjgzNyAxNS4zNDIyQzExLjQxOSAxNS4zNDIyIDEwLjI2OTUgMTYuNDg3IDEwLjI2OTUgMTcuODk5MkMxMC4yNjk1IDE5LjMxMTQgMTEuNDE5IDIwLjQ1NjIgMTIuODM3IDIwLjQ1NjJaIiBmaWxsPSIjMDBBRUVGIi8+CjxwYXRoIGQ9Ik0xOS44Mzk0IDMwLjIxOTRDMjEuMjU3NCAzMC4yMTk0IDIyLjQwNjkgMjkuMDc0NiAyMi40MDY5IDI3LjY2MjRDMjIuNDA2OSAyNi4yNTAyIDIxLjI1NzQgMjUuMTA1MyAxOS44Mzk0IDI1LjEwNTNDMTguNDIxNSAyNS4xMDUzIDE3LjI3MiAyNi4yNTAyIDE3LjI3MiAyNy42NjI0QzE3LjI3MiAyOS4wNzQ2IDE4LjQyMTUgMzAuMjE5NCAxOS44Mzk0IDMwLjIxOTRaIiBmaWxsPSIjMDBBRUVGIi8+CjxwYXRoIGQ9Ik0yNy43NzUgMTYuNzM2OEMyOS4xOTI5IDE2LjczNjggMzAuMzQyNCAxNS41OTIgMzAuMzQyNCAxNC4xNzk4QzMwLjM0MjQgMTIuNzY3NiAyOS4xOTI5IDExLjYyMjggMjcuNzc1IDExLjYyMjhDMjYuMzU3IDExLjYyMjggMjUuMjA3NSAxMi43Njc2IDI1LjIwNzUgMTQuMTc5OEMyNS4yMDc1IDE1LjU5MiAyNi4zNTcgMTYuNzM2OCAyNy43NzUgMTYuNzM2OFoiIGZpbGw9IiMwMEFFRUYiLz4KPHBhdGggZD0iTTQwLjYxMjQgMTEuMzkwNEM0Mi4wMzAzIDExLjM5MDQgNDMuMTc5OCAxMC4yNDU2IDQzLjE3OTggOC44MzMzOEM0My4xNzk4IDcuNDIxMTggNDIuMDMwMyA2LjI3NjM3IDQwLjYxMjQgNi4yNzYzN0MzOS4xOTQ0IDYuMjc2MzcgMzguMDQ0OSA3LjQyMTE4IDM4LjA0NDkgOC44MzMzOEMzOC4wNDQ5IDEwLjI0NTYgMzkuMTk0NCAxMS4zOTA0IDQwLjYxMjQgMTEuMzkwNFoiIGZpbGw9IiMwMEFFRUYiLz4KPC9zdmc+Cg=="
  },
  "description": "9X ROI with cross sell, upsell, related products & more",
  "containerContexts": [
    "WEB"
  ]
}

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Argoid GTM Clickstream",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Argoid"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "templateVariable",
    "displayName": "Argoid Analytics Settings Imported Template Variable Name",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const argoidRestBaseUrl = data.templateVariable.appSettings.eventServerUrl;
const callInWindow = require("callInWindow");
const copyFromWindow = require("copyFromWindow");
const queryPermission = require("queryPermission");
const encodeUriComponent = require("encodeUriComponent");
const log = require("logToConsole");
const makeInt = require("makeInteger");
const getTimestampMillis = require("getTimestampMillis");
const sendPixel = require("sendPixel");
const injectScript = require("injectScript");
const script_url ="https://storage.googleapis.com/common-scripts/basicMethods.js";
const Math = require('Math');
const deviceInfo = data.templateVariable.deviceInfo;
const currentUrlSplit = data.templateVariable.pageView.currentUrl.split("/");
let timestamp = getTimestampMillis().toString();
let browser = "null";
let nAgt = deviceInfo.argoidDeviceInfo.browserUserAgent;
var eventServerRequestHeaders = [];
var verOffset, nameOffset , cartData;
var isProduct = currentUrlSplit[3];
var cartData = data.templateVariable.cart.cartData;
var cartEvent= data.templateVariable.cart.cartEvent;

const FinalData = {
  sessionId: deviceInfo.argoidSessionIdValue,
  userIds: {
    anonymousId: data.templateVariable.user.gaId,
    registeredUserId: data.templateVariable.user.userId,
  },
  appId: data.templateVariable.appSettings.appId,
  appSource: data.templateVariable.appSettings.appSource,
  eventTimestamp: timestamp,
  eventType: "not defined",
  eventAttributes: "not defined",
  deviceAttributes: data.templateVariable.deviceInfo.argoidDeviceInfo,
  clientAttributes: {
    appVersion: data.templateVariable.appSettings.appVersion,
    sdkVersion: data.templateVariable.appSettings.sdkVersion,
    shopifyVariable:data.templateVariable.shopifyVariable
  },
  additionalMetadata: { status: "SUCCESS" },
};

function logger(){
  log("anonymousId =", data.templateVariable.user.gaId);
  log("registeredUserId =", data.templateVariable.user.userId);
  log("appId =", data.templateVariable.appSettings.appId);
  log("appSource =", data.templateVariable.appSettings.appSource);
  log("eventTimestamp =", timestamp);
  log("deviceInfo",data.templateVariable.deviceInfo.argoidDeviceInfo);
  log("browser =", browser);
  log("appVersion =", data.templateVariable.appSettings.appVersion);
  log("sdkVersion =", data.templateVariable.appSettings.sdkVersion);
  log("ShopifyVariable",data.templateVariable.appSettings.shopifyVariable);
}

function generatingCartData() {
  var jsonData = cartData;
  var event= cartEvent;
  var discount_percentage;
  var data;
  if(event=="argoid_add_to_cart" && jsonData.items != null)
  {
              
    var line_items=[];
    for(var i=0;i<jsonData.items.length;i++)
    {
       discount_percentage = (((makeInt(jsonData.items[i].original_price/100)) - (makeInt(jsonData.items[i].final_price/100))) / (makeInt(jsonData.items[i].original_price/100))) * 100.0;
	  	discount_percentage = (Math.round(discount_percentage, 0));
      
           line_items.push({
             "productGroupId": "gid://shopify/Product/"+jsonData.items[i].product_id,
             "productVariantId": "gid://shopify/ProductVariant/"+jsonData.items[i].variant_id,
             "quantity" : jsonData.items[i].quantity,
             "actualPrice": (jsonData.items[i].original_price/100).toString(),
             "finalPrice": (jsonData.items[i].final_price/100).toString(),
             "discount": [{"percentage":discount_percentage.toString()}]
               }
            );
    }
     data = {  
      "lineItems":line_items
  };
    return data;
}  
  else if(event=="argoid_add_to_cart" && jsonData.items == null){
    
        discount_percentage = (((makeInt(jsonData.original_price/100)) - (makeInt(jsonData.final_price/100))) / (makeInt(jsonData.original_price/100))) * 100.0;
	  	discount_percentage = (Math.round(discount_percentage, 0));
        data = {  
      "lineItems": [{
              "productGroupId": "gid://shopify/Product/"+jsonData.product_id,
              "productVariantId": "gid://shopify/ProductVariant/"+jsonData.variant_id,
              "quantity" : jsonData.quantity,
               "actualPrice": (jsonData.original_price/100).toString(),
               "finalPrice": (jsonData.final_price/100).toString(),
               "discount": [{"percentage":discount_percentage.toString()}]
               }]
  };
    return data;
}
}

function addHeaders(){
  data.templateVariable.appSettings.eventServerAuthorization.forEach(function (
    serverAuth
  ) {
    log("serverAuth", serverAuth);
    if (serverAuth.enabled) {
      eventServerRequestHeaders.push(serverAuth.header);
    }
  });
}

function whichBrowser(){
  // Opera
  if ((verOffset = nAgt.indexOf("Opera")) != -1) {
    browser = "Opera";
  }
  // MSIE
  else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
    browser = "Microsoft Internet Explorer";
  }
  // Chrome
  else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
    browser = "Chrome";
  }
  // Safari
  else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
    browser = "Safari";
  }
  // Firefox
  else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
    browser = "Firefox";
  }
  // MSIE 11+
  else if (nAgt.indexOf("Trident/") != -1) {
    browser = "Microsoft Internet Explorer";
  }
  // Other browsers
  else if (
    (nameOffset = nAgt.lastIndexOf(" ") + 1) < (verOffset = nAgt.lastIndexOf("/"))
  ) {
    browser = nAgt.substring(nameOffset, verOffset);
}
}

function isObjectEmpty(obj) {
  if (
    obj == "undefine" ||
    obj == "undefined" ||
    obj == "null" ||
    obj == undefined ||
    obj == null ||
    obj == " "
  ) {
    return true;
  }
  return false;
}

function sendingDataToServer(source) {
  log("calling injectingScript , source = ",source);
  if (queryPermission("inject_script", script_url)) {
    injectScript(
      script_url,
      () => {
        log("sending events to  server");
        var sentFnReturnVal = callInWindow(
          "sendRequest",
          "POST",
          argoidRestBaseUrl,
          FinalData,
          eventServerRequestHeaders
        );
      },
      (err) => {
        log("error while injecting script", err);
      }
    );
  } else {
    log("not injecting Script");
  }
}

function validatingAddToCartData() {
    log("validating cart data");
  var errors = [];
  if (
    isObjectEmpty(FinalData.userIds.anonymousId) &&
    isObjectEmpty(FinalData.userIds.registeredUserId)
  ) {
    errors.push("Unable to anonymousId / registeredUserId");
  }

  if (isObjectEmpty(cartData)) {
    errors.push("Unable to get the Added Cart Data");
  } else if (
    isObjectEmpty(cartData.lineItems) ||
    isObjectEmpty(
      cartData.lineItems[0].quantity
    ) ||
    (isObjectEmpty(
      cartData.lineItems[0].productGroupId
    ) &&
      isObjectEmpty(
        cartData.lineItems[0].productVariantId
      ))
  ) {
    if (isObjectEmpty(cartData.lineItems)) {
      errors.push("Unable to get the lineItems");
    }
    if (
      isObjectEmpty(
        cartData.lineItems[0].quantity
      )
    ) {
      errors.push("Unable to get the lineItems 0 quantity");
    }
    if (
      isObjectEmpty(
        cartData.lineItems[0].productGroupId
      ) &&
      isObjectEmpty(
        cartData.lineItems[0].productVariantId
      )
    ) {
      errors.push(
        "Unable to get the lineItems 0  productGroupId or productVariantId"
      );
    }
  }
  if (errors.length >= 1) {
    FinalData.additionalMetadata = { status: "FAILURE", errors: errors };
  }
}


function eventConditional(){
  log("enter conditional block");
  
if (data.templateVariable.cart.cartEvent == "argoid_add_to_cart" &&
  data.templateVariable.cart.cartEvent != "gtm.pageError" &&  data.templateVariable.cart.addToCardObj !="null") {
    log("argoid ADD_PRODUCT_TO_CART start");
    cartData = generatingCartData();
    FinalData.eventAttributes = cartData;
    FinalData.eventType = "ADD_PRODUCT_TO_CART";
    validatingAddToCartData();
    sendingDataToServer("ADD_PRODUCT_TO_CART");
    log("argoid ADD_PRODUCT_TO_CART end");
}
  
  if(
    isProduct == "products" &&
    data.templateVariable.cart.cartEvent != "gtm.click" &&
    data.templateVariable.cart.cartEvent != "gtm.pageError" &&
    data.templateVariable.cart.cartEvent != "cart_summery" &&
    data.templateVariable.cart.cartEvent != "argoid_add_to_cart"
  ) {
    log("Enter view product");
    const viewProductData = {
      productGroupId: data.templateVariable.pageView.productPage.productId
    };
      FinalData.eventAttributes = viewProductData;
      FinalData.eventType = "VIEW_PRODUCT";
      log("Sending VIEW_PRODUCT event");
      log(data.templateVariable.pageView.sourcePageUrl);
      sendingDataToServer("VIEW_PRODUCT");
  } 
}

logger();
addHeaders();
whichBrowser();
eventConditional();
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "sendPOST.sendEvent"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "sendRequest"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.free.beeceptor.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://storage.googleapis.com/common-scripts/basicMethods.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 11/08/2022, 10:37:07


